<div class="grid">
  <p-toast></p-toast>
  <div class="col-12">
    <div class="card p-fluid">
      <h5 style="text-align: center">Profile Details</h5>
      <br>
      <div class="p-formgrid grid">
        <div class="field col">
          <h5 style="color: #322e2e">User name :</h5>
        </div>
        <div class="field col">
          <h6>{{profile.userName}}</h6>
        </div>
      </div>
      <div class="p-formgrid grid">
        <div class="field col">
          <h5 style="color: #322e2e">First name :</h5>
        </div>
        <div class="field col">
          <h6>{{profile.firstName}}</h6>
        </div>
      </div>
      <div class="p-formgrid grid">
        <div class="field col">
          <h5 style="color: #322e2e">Last name :</h5>
        </div>
        <div class="field col">
          <h6>{{profile.lastName}}</h6>
        </div>
      </div>
      <div class="p-formgrid grid">
        <div class="field col">
          <h5 style="color: #322e2e">Email :</h5>
        </div>
        <div class="field col">
          <h6>{{profile.emailAddress}}</h6>
        </div>
      </div>
      <div class="p-formgrid grid">
        <div class="field col">
          <h5 style="color: #322e2e">Phone number :</h5>
        </div>
        <div class="field col">
          <h6>{{profile.phoneNumber}}</h6>
        </div>
      </div>
      <div class="p-formgrid grid" *ngIf="profile.roles">
        <div class="field col">
          <h5 style="color: #cb9a15">As :</h5>
        </div>
        <div class="field col">
          <h6>{{profile.roles[0].roleName}}</h6>
        </div>
      </div>
      <div style="text-align: center">
        <button pButton pRipple label="Edit Profile" class="gray-button" style="margin-top: 30px;width: 200px"
        (click)="editProfileDialog = true; submitted = false ; updateProfileDto = {}"></button>
        <button pButton pRipple label="Change password" class="gray-button" style="margin-left: 30px;width: 200px" (click)="changePasswordDialog = true; changePasswordDto={};
            submitted = false"></button>
      </div>
    </div>


    <p-dialog [(visible)]="changePasswordDialog" [style]="{width: '450px'}" [closable]="false" header="Password Details" [modal]="true" class="p-fluid">
      <ng-template pTemplate="content">
        <div class="field">
          <label>New password</label>
          <input type="password" pInputText [(ngModel)]="changePasswordDto.newPassword" required autofocus [ngClass]="{'ng-invalid ng-dirty' : submitted && !changePasswordDto.newPassword}"/>
          <small class="ng-dirty ng-invalid" *ngIf="submitted && !changePasswordDto.newPassword">New password is required.</small>
        </div>
        <div class="field">
          <label>Confirmation</label>
          <input type="password" pInputText [(ngModel)]="changePasswordDto.confirmation" required autofocus [ngClass]="{'ng-invalid ng-dirty' : submitted && !changePasswordDto.confirmation}"/>
          <small class="ng-dirty ng-invalid" *ngIf="submitted && !changePasswordDto.confirmation">Confirmation is required.</small>
        </div>
      </ng-template>
      <ng-template pTemplate="footer">
        <button pButton pRipple label="Cancel" icon="pi pi-times" class="p-button-text" (click)="changePasswordDialog = false"></button>
        <button pButton pRipple label="Save" icon="pi pi-check"  class="p-button-text" (click)="changePassword()"></button>
      </ng-template>
    </p-dialog>
    <p-dialog [(visible)]="editProfileDialog" [style]="{width: '450px'}" [closable]="false" header="Profile Details" [modal]="true" class="p-fluid">
      <ng-template pTemplate="content">
        <div class="field">
          <label>First name</label>
          <input type="text" pInputText [(ngModel)]="updateProfileDto.firstName" required autofocus [ngClass]="{'ng-invalid ng-dirty' : submitted && !updateProfileDto.firstName}"/>
          <small class="ng-dirty ng-invalid" *ngIf="submitted && !updateProfileDto.firstName">First name is required.</small>
        </div>
        <div class="field">
          <label>Last name</label>
          <input type="text" pInputText [(ngModel)]="updateProfileDto.lastName" required autofocus [ngClass]="{'ng-invalid ng-dirty' : submitted && !updateProfileDto.lastName}"/>
          <small class="ng-dirty ng-invalid" *ngIf="submitted && !updateProfileDto.lastName">Last name is required.</small>
        </div>
        <div class="field">
          <label>Phone number</label>
          <p-inputMask mask="(+216) 99-999-999" [(ngModel)]="updateProfileDto.phoneNumber" placeholder="(+216) 99-999-9999"></p-inputMask>
        </div>
      </ng-template>
      <ng-template pTemplate="footer">
        <button pButton pRipple label="Cancel" icon="pi pi-times" class="p-button-text" (click)="editProfileDialog = false"></button>
        <button pButton pRipple label="Save" icon="pi pi-check"  class="p-button-text" (click)="updateProfile()"></button>
      </ng-template>
    </p-dialog>


  </div>
</div>
